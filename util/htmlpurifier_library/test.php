<?php
require_once "../../config.php";

use \Tsugi\Grades\GradeUtil;
use \Tsugi\Core\LTIX;
use \Tsugi\Util\LTI;
use \Tsugi\Util\Caliper;

// Retrieve the launch data if present
$LAUNCH = LTIX::requireData();
$p = $CFG->dbprefix;


// Start of the output
$OUTPUT->header();
$OUTPUT->bodyStart();
$OUTPUT->flashMessages();


?>

<script src="../js/kekule_libs/raphael.js"></script>
<script src="../js/kekule_libs/raphael.export.js"></script>
<script src="../js/kekule_libs/three.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
<!-- <script src="js/kekule_libs/kekule/kekule.min.js"></script> -->
<script src="../js/kekule_libs/dist/kekule.js"></script>
<link rel="stylesheet" type="text/css" href="../js/kekule_libs/kekule/themes/default/kekule.css" />



<?php






echo '<a href="./test.php">Refresh</a>';

$html = '<img class="K-Chem-Viewer2D" style="width: 153px; height: 163px;" src="data:image/png;base64,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" alt="" width="153" height="163" data-kekule-widget="Kekule.ChemWidget.Viewer" data-render-type="2" data-chem-obj="url(#HfTJqELT)" data-predefined-setting="basic" data-auto-size="true" />';



$html = '<img class="K-Chem-Viewer2D" style="width: 113px; height: 110px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAABuCAYAAAAQ/vyeAAADt0lEQVR4Xu2ZTahNYRSGnxtFEVOUUEwYUAoDEiUUE1JKmBBGiAmSJEwII8QEKSUmFFIkBijFgAmFFKZEUZS+OmJwu52fvdbd+73vGX/f+971PHfVOXv34U/jCfQ1fgIPgCUK/BNYoiUKEBAYwZtoiQIEBEbwJlqiAAGBEbyJlihAQGAEb6IlChAQGMGbaIkCBARG8CZaogABgRG8iZYoQEBgBG+iJQoQEBjBm2iJAgQERvAmWqIAAYERvImWKEBAYARvoiUKEBAYwZtoiQIEBEbwJlqiAAGBEbyJlihAQGAEb6IlChAQGMGbaIkCBARG8CZaogABgRG8iZYoQEBgBG+iJQ4agQMJzQcTOiqpaOImzgGuA+crIdB/yCZgFfA0sKOy6CZKLMNfBO4Clyoj8S9oPbAE2BCQHRLZVIljgA/A2AAqX4CJwNeA7JDIpkosMPYCo4B9FZI5DHwHjlSYGR7VZIkFzkdgNvCpAlLjgWfAhAqyUiOaLrF8+VgHrK6A2jXgcutLUwVxeRFNl1hI3QMOAfd7wLYI2A8s7iFj0K4qSJwOXAVm9EDxJbAGeNVDxqBdVZBY4J0GXgBnuiC5FZgJbOvibi2uqEgcBvwEhndB9RcwAvjdxd1aXFGRWGBuB6YAOzogexJ4C5zq4E7tjipJLHBfA8uBN22QngrcAqa1cbbWR9QkLgV2AsvaoH4bOAHcaeNsrY+oSSywbwBngZsDkF8BbAFW1tpOm3+cosRJwANg8gAM3gELgfdtcqr1MUWJBfix1qO44/3Q3wWUR2y7a22mgz9OVWJB8KP1lqP89Pj7KT8lyluKkR0wqv1RZYnlxe5cYPN/Fs4BT4JfKKdLV5ZYYD4HNrae5pSnMheAWemUgwvVJc4HjgILgIfAHuBRMNP0eHWJBegV4DMwDlibTjihcChIHA08BuYB3xKYplcMBYnpULMLLTGbeECfJQZAzY60xGziAX2WGAA1O9ISs4kH9FliANTsSEvMJh7QZ4kBULMjLTGbeECfJQZAzY60xGziAX2WGAA1O9ISs4kH9FliANTsSEvMJh7QZ4kBULMjLTGbeECfJQZAzY60xGziAX2WGAA1O9ISs4kH9FliANTsSEvMJh7QZ4kBULMjLTGbeECfJQZAzY60xGziAX2WGAA1O9ISs4kH9FliANTsSEvMJh7QZ4kBULMjLTGbeECfJQZAzY60xGziAX2WGAA1O9ISs4kH9FliANTsSEvMJh7QZ4kBULMjLTGbeECfJQZAzY78AxBSQW/71PbkAAAAAElFTkSuQmCC" alt="Question Image" width="113" height="110" data-kekule-widget="Kekule.ChemWidget.Viewer" data-render-type="2" data-chem-obj="url(#JqlIBFR0)" data-predefined-setting="basic" data-auto-size="true" />';

$html = '<div id="tghteyd" style="display: none;" >{"coordPos2D":0,"coordPos3D":0,"defAutoScaleRefLength":0.8,"root":{"id":"o1","coordPos2D":0,"coordPos3D":0,"children":{"id":"o2","coordPos2D":0,"coordPos3D":0,"items":[{"__type__":"Kekule.Molecule","coordPos2D":0,"coordPos3D":0,"renderOptions":{"expanded":true,"__type__":"object"},"coord2D":{"x":12.096,"y":44.416,"__type__":"object"},"charge":0,"parity":null,"ctab":{"nodes":[{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0,"y":-0.4618802153516981,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0.40000000000000036,"y":0.23094010767584194,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":-0.40000000000000036,"y":0.23094010767584194,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[0,1]},{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[1,2]},{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[2,0]}],"__type__":"Kekule.StructureConnectionTable"}},{"__type__":"Kekule.Glyph.StraightLine","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":13.034666666666666,"y":44.373333333333335,"__type__":"object"},"ctab":{"nodes":[{"__type__":"Kekule.Glyph.PathGlyphNode","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0.0426666666666673,"y":-0.021333333333330984,"__type__":"object"},"coord3D":{"x":0,"y":0,"z":0,"__type__":"object"},"nodeType":"location"},{"__type__":"Kekule.Glyph.PathGlyphNode","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":1.2426666666666666,"y":-0.021333333333330984,"__type__":"object"},"coord3D":{"x":1.2000000000000002,"y":0,"z":0,"__type__":"object"},"nodeType":"location"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Glyph.PathGlyphConnector","coordPos2D":0,"coordPos3D":0,"pathType":"L","pathParams":{"endArrowType":"open","endArrowWidth":0.2,"endArrowLength":0.2,"lineLength":1.5,"__type__":"object"},"connectedObjs":[0,1]}],"__type__":"Kekule.StructureConnectionTable"}},{"__type__":"Kekule.Glyph.StraightLine","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":16.192,"y":45.909333333333336,"__type__":"object"},"ctab":{"nodes":[{"__type__":"Kekule.Glyph.PathGlyphNode","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0,"y":0,"__type__":"object"},"coord3D":{"x":0,"y":0,"z":0,"__type__":"object"},"nodeType":"location"},{"__type__":"Kekule.Glyph.PathGlyphNode","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":1.1999999999999993,"y":0,"__type__":"object"},"coord3D":{"x":1.2000000000000002,"y":0,"z":0,"__type__":"object"},"nodeType":"location"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Glyph.PathGlyphConnector","coordPos2D":0,"coordPos3D":0,"pathType":"L","pathParams":{"endArrowType":"open","endArrowWidth":0.2,"endArrowLength":0.2,"lineLength":1.5,"__type__":"object"},"connectedObjs":[0,1]}],"__type__":"Kekule.StructureConnectionTable"}}],"__type__":"Kekule.ChemObjList"},"__type__":"Kekule.ChemSpaceElement"},"enableAutoId":true,"screenSize":{"x":900,"y":1500,"__type__":"object"},"size2D":{"x":28.8,"y":48,"__type__":"object"},"__type__":"Kekule.ChemDocument"}</div>';



$html = '<div id="VSeoJVlD" style="display: none;" type="chemical/x-kekule-json">{"coordPos2D":0,"coordPos3D":0,"renderOptions":{"expanded":true,"__type__":"object"},"coord2D":{"x":10.901333333333334,"y":44.842666666666666,"__type__":"object"},"charge":0,"parity":null,"ctab":{"nodes":[{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0,"y":-0.4618802153517052,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0.3999999999999986,"y":0.23094010767584905,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":-0.40000000000000036,"y":0.23094010767584905,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[0,1]},{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[1,2]},{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[2,0]}],"__type__":"Kekule.StructureConnectionTable"},"__type__":"Kekule.Molecule"}</div>';


//2D example works

$html = '<img class="K-Chem-Viewer2D" style="width: 113px; height: 110px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAABuCAYAAAAQ/vyeAAADyklEQVR4Xu2ZT4iNYRjFZ6IoYosSig0LSmFBooRiQ0oJG8IKsUGShA1hhdggpcSGQorEAqVYsKGQwpYoinLehVhM0/3znXO/78y5dWq6877PM8/vN0/dP/19eTSeQH/jJ8gAfZFo8E8QiZFoQMBghGxiJBoQMBghmxiJBgQMRsgmRqIBAYMRsomRaEDAYIRsYiQaEDAYIZsYiQYEDEbIJkaiAQGDEbKJkWhAwGCEbGIkGhAwGCGbGIkGBAxGyCZGogEBgxGyiZFoQMBghGxiJBoQMBghmxiJBgQMRsgmRqIBAYMRsomRaEDAYIRsYiQaEDAYIZsYiQYEDEbIJkaiAQGDEbKJkdgzAgcEnQ8KelTSoombOAeTX0fOV0Jg4CKb8PQq5CmxR2WlmyixDH8RuYtcqozEv0Lr8eMSZAOhNqVkUyWOAY0PyFgClS+oORH5SqhNKdlUiQXGXmQUsq9CModR6ztypMKa9FJNlljgfERmI58qIDUeNZ4hEyqoJS3RdInlxcc6ZHUF1K6hxmWkvGhq1KPpEgvse8gh5H4X5Bfh7n5kcRc1enbVQeJ00LuKzOiC4kvcXYO86qJGz646SCzwTiMvkDMdkNyKOzORbR3crcUVF4nDQPMnMrwDqr9wZwTyu4O7tbjiIrHA3I5MQXa0QfYkzr5FTrVxp3ZHnSQWuK+R5cibFkhPxZlbyLQWztb6iJvEpaC9E1nWAvXbOHMCudPC2VofcZNYYN9AziI3ByG/Ar/bgqystZ0W/zhHiZMw+wNk8iAM3uF3C5H3LXKq9TFHiQX4MaR8FHd8APq78Fz5iG13rc208ce5SiwIfiDlW47y1uPvo7yVKN9SjGyDUe2POkssX+zORTb/Z+Ecfn6CML9Qlkt3llhgPkc2IuXTnPKpzAVklpwyuaG7xPngdxRZgDxE9iCPyEzl5d0lFqBXkM/IOGStnLCg4VCQOBocHyPzkG8CpvIWQ0GiHKq6YSSqiRP6RSIBqrpkJKqJE/pFIgGqumQkqokT+kUiAaq6ZCSqiRP6RSIBqrpkJKqJE/pFIgGqumQkqokT+kUiAaq6ZCSqiRP6RSIBqrpkJKqJE/pFIgGqumQkqokT+kUiAaq6ZCSqiRP6RSIBqrpkJKqJE/pFIgGqumQkqokT+kUiAaq6ZCSqiRP6RSIBqrpkJKqJE/pFIgGqumQkqokT+kUiAaq6ZCSqiRP6RSIBqrpkJKqJE/pFIgGqumQkqokT+kUiAaq6ZCSqiRP6RSIBqrpkJKqJE/pFIgGqumQkqokT+kUiAaq65B8QUkFvuOU0ngAAAABJRU5ErkJggg==" alt="Question Image" width="113" height="110" data-kekule-widget="Kekule.ChemWidget.Viewer" data-render-type="2" data-chem-obj="url(#vsmVBSdp)" data-predefined-setting="basic" data-auto-size="true" data-background-color="transparent" /></p>
<div id="vsmVBSdp" style="display: none;" type="chemical/x-kekule-json">{"coordPos2D":0,"coordPos3D":0,"renderOptions":{"expanded":true,"__type__":"object"},"coord2D":{"x":13.845333333333333,"y":44.032,"__type__":"object"},"charge":0,"parity":null,"ctab":{"nodes":[{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0,"y":-0.4618802153516981,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0.40000000000000036,"y":0.23094010767584194,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":-0.40000000000000036,"y":0.23094010767584194,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[0,1]},{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[1,2]},{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[2,0]}],"__type__":"Kekule.StructureConnectionTable"},"__type__":"Kekule.Molecule"}</div>';


//3Dexample
/*
$html = '<p><img class="K-Chem-Viewer3D" style="width: 583px; height: 354px;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkcAAAFiCAYAAAD8ynzvAAAgAElEQVR4Xu3d+6vtRf0/8NXF1NTU7A9IxbR+CLIggyKiH4IwqH6o/qD+gCC7ec1LiSZaKYmYGJZZ2sUoU0rRICgJhEzPxXOqb7P4zPmO48x75r32Xnu995nHgYPn7D17rfc85r08T15zeb9ptVr993+//SJAgAABAgQIEPifwJuEI/cBAQIECBAgQOD/CwhH7gYCBAgQIECAQCIgHLkdCBAgQIAAAQLCkXuAAAECBAgQIFAWUDlyZxAgQIAAAQIEVI7cAwQIECBAgAABlSP3AAECBAgQIECgKWBarUmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAQECBAgQIDCSgHA00mjrKwECBAgQINAUEI6aRBoQIECAAAECIwkIRyONtr4SIECAAAECTQHhqEmkAYHTR+Bzn/vc6owzzli95S1vWf9+85vfvP79pje9af07/Prvf/+7/n3y5MnVbbfddvp0PuvJZz7zmdWZ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IFATEI7cGwQIbF1gk4pS7aKEoa0PlzcgMLyAcDT8LQCAwMELzAlLwtDBj493JDC6gHA0+h2g/wQIECBAgMDrBIQjNwQBAgQIECBAIBEQjtwOBAgQIECAAAHhyD1AgAABAgQIECgLqBy5MwgQIECAAAECKkfuAQIECBAgQICAypF7gAABAgQIECDQFDCt1iTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJQDgaabT1lQABAgQIEGgKCEdNIg0IECBAgACBkQSEo5FGW18JECBAgACBpoBw1CTSgAABAgQIEBhJ4P8B53ei0q7wN5IAAAAASUVORK5CYII=" alt="Question Image" width="583" height="354" data-kekule-widget="Kekule.ChemWidget.Viewer" data-render-type="3" data-chem-obj="url(#FkLvHbDW)" data-predefined-setting="basic" data-auto-size="true" data-background-color="transparent" /></p>
<div id="FkLvHbDW" style="display: none;" type="chemical/x-kekule-json">{"coordPos2D":0,"coordPos3D":0,"renderOptions":{"expanded":true,"__type__":"object"},"coord2D":{"x":12.586666666666666,"y":44.757333333333335,"__type__":"object"},"charge":0,"parity":null,"ctab":{"nodes":[{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0,"y":-0.4618802153516981,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":0.40000000000000036,"y":0.23094010767584905,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"},{"__type__":"Kekule.Atom","coordPos2D":0,"coordPos3D":0,"coord2D":{"x":-0.40000000000000036,"y":0.23094010767584905,"__type__":"object"},"charge":0,"parity":null,"isotopeId":"C"}],"anchorNodes":[],"connectors":[{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[0,1]},{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[1,2]},{"__type__":"Kekule.Bond","coordPos2D":0,"coordPos3D":0,"parity":null,"bondType":"covalent","bondOrder":1,"electronCount":2,"isInAromaticRing":false,"connectedObjs":[2,0]}],"__type__":"Kekule.StructureConnectionTable"},"__type__":"Kekule.Molecule"}</div>
<p>&nbsp;</p>';
*/



//$html = '<img  src="/tsugi/mod/openochem/uploads/Jane_Instructor/img1507604723112.png" alt="" />';

//$html = '<img data-chem-obj="url(#9ZWIBou9)" style="width: 113px; height: 110px;" class="K-Chem-Viewer2D" src="blob:https://nsm0351.nsm.iup.edu/adf7c187-7def-4333-a176-4eaf39f12b69" alt="" />';



//$html = '<img class="K-Chem-Viewer2D" style="width: 113px; height: 110px;" src="blob:https://nsm0351.nsm.iup.edu/adf7c187-7def-4333-a176-4eaf39f12b69" alt="Question Image" width="113" height="110" data-kekule-widget="Kekule.ChemWidget.Viewer" data-render-type="2" data-chem-obj="url(#9ZWIBou9)" data-predefined-setting="basic" data-auto-size="true" />';



require_once 'HTMLPurifier.auto.php';
 
/*
$config = HTMLPurifier_Config::createDefault();
//$config->set('HTML.Allowed', 'img[data-chem-obj]');
$config->set('HTML.DefinitionID', 'enduser-customize.html tutorial');
$config->set('HTML.DefinitionRev', 1);
$config->set('Cache.DefinitionImpl', null); // TODO: remove this later!
//$def = $config->getHTMLDefinition(true);
//$def->info_global_attr['data-chem-obj'] = new HTMLPurifier_AttrDef_Text;
$config->set('URI.AllowedSchemes', array('data' => true, 'type' => true));
$config->set('CSS.AllowTricky', true);
$config->set('Attr.EnableID', true);

$def = $config->maybeGetRawHTMLDefinition();

if ($def) {
$def->addAttribute('div', 'type', 'Enum#chemical/x-kekule-json');
$def->addAttribute('div', 'id', 'Text');

$def->addAttribute('img', 'style', 'CDATA');
$def->addAttribute('img', 'src', 'CDATA');
//$def->addAttribute('img', 'data-kekule-widget', 'Enum#"Kekule.ChemWidget.Viewer"');
$def->addAttribute('img', 'data-kekule-widget', 'CDATA');
$def->addAttribute('img', 'data-render-type', 'Number');
$def->addAttribute('img', 'data-chem-obj', 'Text');
$def->addAttribute('img', 'data-predefined-setting', 'Enum#basic');
$def->addAttribute('img', 'data-auto-size', 'Enum#true,false');

}
$purifier = new HTMLPurifier($config);
*/
               
                    $clean_html = $purifier->purify($html);
                    echo "<pre>".$clean_html."</pre>";
                    
                    echo htmlspecialchars($clean_html);






